# ì „ìê²°ì¬ ì‹œìŠ¤í…œ êµ¬í˜„ ê³„íš

**ìµœì¢… ìˆ˜ì •ì¼**: 2025-08-21  
**ë³€ê²½ ì´ë ¥**: 
- @dataclassì—ì„œ Pydantic BaseModelë¡œ ë³€ê²½
- Phase 1, 2 êµ¬í˜„ ì™„ë£Œ
- í…œí”Œë¦¿ ì—†ì´ë„ ê²°ì¬ ìš”ì²­ ìƒì„± ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •

**ğŸ‰ êµ¬í˜„ ìƒíƒœ**: Phase 1, 2 ì™„ë£Œ - ê¸°ë³¸ ì „ìê²°ì¬ ì‹œìŠ¤í…œ ë™ì‘ ê°€ëŠ¥

## 1. í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ì•„í‚¤í…ì²˜

### 1.1 ê¸°ì¡´ ì‹œìŠ¤í…œ ë¶„ì„
- í˜„ì¬ ì‹œìŠ¤í…œ: ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ (interface â†’ application â†’ domain â†’ infra)
- ê¸°ì¡´ ì—”í‹°í‹°: User, Voucher, File, Group
- ì¸ì¦/ê¶Œí•œ: JWT ê¸°ë°˜, Role (ADMIN, USER, VOUCHER), ApprovalStatus

### 1.2 ìƒˆë¡œìš´ ì—”í‹°í‹° ì¶”ê°€
```
domain/
â”œâ”€â”€ document_template.py     # ê²°ì¬ ì–‘ì‹ í…œí”Œë¦¿
â”œâ”€â”€ approval_request.py      # ê²°ì¬ ìš”ì²­ì„œ
â”œâ”€â”€ approval_line.py         # ê²°ì¬ì„ 
â”œâ”€â”€ approval_history.py      # ê²°ì¬ ì´ë ¥
â””â”€â”€ attached_file.py         # ì²¨ë¶€íŒŒì¼ (ê²°ì¬ìš©)
```

## 2. ë„ë©”ì¸ ëª¨ë¸ ì„¤ê³„

### 2.1 DocumentTemplate (ê²°ì¬ ì–‘ì‹)
```python
from pydantic import BaseModel, Field, ConfigDict
from typing import Optional, List
from datetime import datetime

class DefaultApprovalStep(BaseModel):
    step_order: int           # ê²°ì¬ ìˆœì„œ
    approver_id: str          # ê¸°ë³¸ ê²°ì¬ì ID (ë˜ëŠ” ì§ì±…/ë¶€ì„œ)
    is_required: bool = True  # í•„ìˆ˜ ê²°ì¬ ì—¬ë¶€
    is_parallel: bool = False # ë³‘ë ¬ ê²°ì¬ ì—¬ë¶€

class DocumentTemplate(BaseModel):
    id: str
    name: str                    # ì–‘ì‹ëª… (ì—…ë¬´ê¸°ì•ˆ, ì§€ì¶œê²°ì˜ì„œ ë“±)
    description: Optional[str] = None   # ì–‘ì‹ ì„¤ëª…
    category: str               # ì¹´í…Œê³ ë¦¬ (ì—…ë¬´, ì§€ì¶œ, ì¸ì‚¬ ë“±)
    document_prefix: Optional[str] = None        # ë¬¸ì„œë²ˆí˜¸ í”„ë¦¬í”½ìŠ¤
    default_approval_steps: List[DefaultApprovalStep] = Field(default_factory=list)  # ê¸°ë³¸ ê²°ì¬ì„ 
    is_active: bool = True
    created_at: datetime
    updated_at: datetime
    
    model_config = ConfigDict(extra="ignore")
```

### 2.2 ApprovalRequest (ê²°ì¬ ìš”ì²­ì„œ)
```python
from common.auth import DocumentVisibility, DocumentStatus

class ApprovalRequest(BaseModel):
    id: str
    template_id: Optional[str] = None    # ì‚¬ìš©í•œ ì–‘ì‹ ID (ì˜µì…”ë„ - í…œí”Œë¦¿ ì—†ì´ë„ ìƒì„± ê°€ëŠ¥)
    document_number: str       # ìë™ ìƒì„± ë¬¸ì„œë²ˆí˜¸
    title: str                # ê²°ì¬ ì œëª©
    content: str              # ê²°ì¬ ë‚´ìš© (HTML)
    form_data: Dict[str, Any] = Field(default_factory=dict) # ì–‘ì‹ë³„ ì¶”ê°€ ë°ì´í„°
    requester_id: str         # ê¸°ì•ˆì ID
    department_id: Optional[str] = None        # ê¸°ì•ˆ ë¶€ì„œ
    visibility: DocumentVisibility  # ê³µê°œë²”ìœ„
    status: DocumentStatus    # ê²°ì¬ ìƒíƒœ
    current_step: int = 0         # í˜„ì¬ ê²°ì¬ ë‹¨ê³„
    created_at: datetime
    updated_at: datetime
    submitted_at: Optional[datetime] = None
    completed_at: Optional[datetime] = None
    
    model_config = ConfigDict(extra="ignore")
```

### 2.3 ApprovalLine (ê²°ì¬ì„ )
```python
from common.auth import ApprovalStatus

class ApprovalLine(BaseModel):
    id: str
    request_id: str           # ê²°ì¬ ìš”ì²­ ID
    approver_id: str          # ê²°ì¬ì ID
    step_order: int           # ê²°ì¬ ìˆœì„œ
    is_required: bool = True         # í•„ìˆ˜ ê²°ì¬ ì—¬ë¶€
    is_parallel: bool = False         # ë³‘ë ¬ ê²°ì¬ ì—¬ë¶€
    status: ApprovalStatus = ApprovalStatus.PENDING    # ê°œë³„ ê²°ì¬ ìƒíƒœ
    approved_at: Optional[datetime] = None
    comment: Optional[str] = None    # ê²°ì¬ ì˜ê²¬
    
    model_config = ConfigDict(extra="ignore")
```

### 2.4 ApprovalHistory (ê²°ì¬ ì´ë ¥)
```python
from common.auth import ApprovalAction

class ApprovalHistory(BaseModel):
    id: str
    request_id: str
    approver_id: str
    action: ApprovalAction    # APPROVE, REJECT, CANCEL
    comment: Optional[str] = None
    created_at: datetime
    ip_address: Optional[str] = None
    
    model_config = ConfigDict(extra="ignore")
```

### 2.5 AttachedFile (ì²¨ë¶€íŒŒì¼)
```python
class AttachedFile(BaseModel):
    id: str
    request_id: str
    file_name: str
    file_path: str
    file_size: int
    file_type: str
    is_reference: bool = False        # ì°¸ì¡°ë¬¸ì„œ ì—¬ë¶€
    uploaded_at: datetime
    uploaded_by: str
    
    model_config = ConfigDict(extra="ignore")
```

## 3. Enum ì¶”ê°€ (common/auth.py)

ê¸°ì¡´ ApprovalStatus ì•„ë˜ì— ì¶”ê°€:

```python
class DocumentStatus(StrEnum):
    DRAFT = "DRAFT"                    # ì„ì‹œì €ì¥
    SUBMITTED = "SUBMITTED"            # ìƒì‹ ì™„ë£Œ
    IN_PROGRESS = "IN_PROGRESS"        # ê²°ì¬ì§„í–‰ì¤‘
    APPROVED = "APPROVED"              # ìŠ¹ì¸ì™„ë£Œ
    REJECTED = "REJECTED"              # ë°˜ë ¤
    CANCELLED = "CANCELLED"            # ì·¨ì†Œ

class ApprovalAction(StrEnum):
    APPROVE = "APPROVE"                # ìŠ¹ì¸
    REJECT = "REJECT"                  # ë°˜ë ¤
    CANCEL = "CANCEL"                  # ì·¨ì†Œ

class DocumentVisibility(StrEnum):
    PUBLIC = "PUBLIC"                  # ì „ì²´ê³µê°œ
    PRIVATE = "PRIVATE"                # ë¹„ê³µê°œ
    DEPARTMENT = "DEPARTMENT"          # ë¶€ì„œê³µê°œ
```

**ì£¼ì˜**: ì´ë¯¸ ê¸°ì¡´ ApprovalStatusê°€ ìˆìœ¼ë¯€ë¡œ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ì£¼ì˜

## 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 4.1 MongoDB ì»¬ë ‰ì…˜ ì„¤ê³„
```
collections:
- document_templates     # ê²°ì¬ ì–‘ì‹
- approval_requests      # ê²°ì¬ ìš”ì²­ì„œ
- approval_lines        # ê²°ì¬ì„ 
- approval_histories    # ê²°ì¬ ì´ë ¥
- attached_files        # ì²¨ë¶€íŒŒì¼
```

### 4.2 DB ëª¨ë¸ íŒŒì¼ êµ¬ì¡°
```
infra/db_models/
â”œâ”€â”€ document_template.py
â”œâ”€â”€ approval_request.py
â”œâ”€â”€ approval_line.py
â”œâ”€â”€ approval_history.py
â””â”€â”€ attached_file.py
```

### 4.3 ì¸ë±ìŠ¤ ì„¤ê³„
- approval_requests: requester_id, status, created_at
- approval_lines: request_id, approver_id, step_order
- approval_histories: request_id, created_at
- attached_files: request_id

## 5. API ì„¤ê³„

### 5.1 ì–‘ì‹ ê´€ë¦¬ API
```
GET    /api/templates                # ì–‘ì‹ ëª©ë¡
GET    /api/templates/{id}           # ì–‘ì‹ ìƒì„¸
POST   /api/templates               # ì–‘ì‹ ìƒì„± (ê´€ë¦¬ì)
PUT    /api/templates/{id}          # ì–‘ì‹ ìˆ˜ì • (ê´€ë¦¬ì)
DELETE /api/templates/{id}          # ì–‘ì‹ ì‚­ì œ (ê´€ë¦¬ì)
```

### 5.2 ê²°ì¬ ìš”ì²­ API
```
POST   /api/approvals               # ê²°ì¬ ìš”ì²­ ìƒì„±
GET    /api/approvals               # ê²°ì¬ ëª©ë¡ (ë‚´ê°€ ê¸°ì•ˆí•œ/ê²°ì¬í• )
GET    /api/approvals/{id}          # ê²°ì¬ ìƒì„¸
PUT    /api/approvals/{id}          # ì„ì‹œì €ì¥ ìˆ˜ì •
POST   /api/approvals/{id}/submit   # ìƒì‹ í•˜ê¸°
DELETE /api/approvals/{id}          # ê²°ì¬ ì·¨ì†Œ/ì‚­ì œ
```

### 5.3 ê²°ì¬ ì²˜ë¦¬ API
```
POST   /api/approvals/{id}/approve  # ìŠ¹ì¸
POST   /api/approvals/{id}/reject   # ë°˜ë ¤
GET    /api/approvals/{id}/history  # ê²°ì¬ ì´ë ¥
POST   /api/approvals/{id}/cancel   # ê²°ì¬ ì·¨ì†Œ
```

### 5.4 ê²°ì¬ì„  ê´€ë¦¬ API
```
GET    /api/approvals/{id}/lines    # ê²°ì¬ì„  ì¡°íšŒ
PUT    /api/approvals/{id}/lines    # ê²°ì¬ì„  ìˆ˜ì •
GET    /api/users/approvers         # ê²°ì¬ì ëª©ë¡ (ë¶€ì„œë³„)
```

### 5.5 íŒŒì¼ ê´€ë¦¬ API
```
POST   /api/approvals/{id}/files    # ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ
GET    /api/approvals/{id}/files    # ì²¨ë¶€íŒŒì¼ ëª©ë¡
DELETE /api/files/{id}              # ì²¨ë¶€íŒŒì¼ ì‚­ì œ
GET    /api/files/{id}/download     # íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```

### 5.6 ë¬¸ì„œë²ˆí˜¸ API
```
GET    /api/document-numbers/next   # ë‹¤ìŒ ë¬¸ì„œë²ˆí˜¸ ì¡°íšŒ
```

## 6. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

### 6.1 ê²°ì¬ ì›Œí¬í”Œë¡œìš°
1. **ê¸°ì•ˆ ì‘ì„±**: 
   - **í…œí”Œë¦¿ ì‚¬ìš©**: ì–‘ì‹ ì„ íƒ â†’ ê¸°ë³¸ ê²°ì¬ì„  ìë™ ì„¤ì • â†’ ë‚´ìš© ì‘ì„± â†’ ì²¨ë¶€íŒŒì¼
   - **ììœ  ì‘ì„±**: ì œëª©/ë‚´ìš© ì§ì ‘ ì‘ì„± â†’ ê²°ì¬ì„  ìˆ˜ë™ ì„¤ì • â†’ ì²¨ë¶€íŒŒì¼
2. **ì„ì‹œì €ì¥**: ì‘ì„± ì¤‘ ìë™ì €ì¥/ìˆ˜ë™ì €ì¥ (DRAFT ìƒíƒœ)
3. **ìƒì‹ **: ê²°ì¬ì„  1ë‹¨ê³„ ê²°ì¬ìì—ê²Œ ì•Œë¦¼ (SUBMITTED â†’ IN_PROGRESS)
4. **ê²°ì¬ ì§„í–‰**: ìˆœì°¨/ë³‘ë ¬ ê²°ì¬ ì²˜ë¦¬
5. **ì™„ë£Œ**: ëª¨ë“  ê²°ì¬ ì™„ë£Œ ì‹œ ìµœì¢… ìŠ¹ì¸ (APPROVED) ë˜ëŠ” ë°˜ë ¤ (REJECTED)

### 6.2 ê²°ì¬ì„  ì²˜ë¦¬ ë¡œì§
- **ìˆœì°¨ ê²°ì¬**: ì´ì „ ë‹¨ê³„ ì™„ë£Œ í›„ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰
- **ë³‘ë ¬ ê²°ì¬**: ë™ì¼ ë‹¨ê³„ ëª¨ë“  ê²°ì¬ìê°€ ë™ì‹œ ê²°ì¬
- **í•„ìˆ˜/ì„ íƒ**: í•„ìˆ˜ ê²°ì¬ìëŠ” ë°˜ë“œì‹œ ìŠ¹ì¸, ì„ íƒì€ ê±´ë„ˆë›°ê¸° ê°€ëŠ¥

### 6.3 ë¬¸ì„œë²ˆí˜¸ ìƒì„± ê·œì¹™
```
í…œí”Œë¦¿ ì‚¬ìš© ì‹œ: {ì–‘ì‹í”„ë¦¬í”½ìŠ¤}-{ë…„ë„}-{ì›”ì¼}-{ULID 6ìë¦¬}
ì˜ˆì‹œ: ì—…ë¬´ê¸°ì•ˆ-2025-0821-A1B2C3

í…œí”Œë¦¿ ì—†ìŒ: ì¼ë°˜ê²°ì¬-{ë…„ë„}-{ì›”ì¼}-{ULID 6ìë¦¬}
ì˜ˆì‹œ: ì¼ë°˜ê²°ì¬-2025-0821-D4E5F6
```

## 7. ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì„¤ê³„

### 7.1 Application Services
```
application/
â”œâ”€â”€ document_template_service.py    # ì–‘ì‹ ê´€ë¦¬
â”œâ”€â”€ approval_service.py             # ê²°ì¬ ìš”ì²­/ì²˜ë¦¬
â”œâ”€â”€ approval_line_service.py        # ê²°ì¬ì„  ê´€ë¦¬
â”œâ”€â”€ document_number_service.py      # ë¬¸ì„œë²ˆí˜¸ ìƒì„±
â””â”€â”€ file_attachment_service.py      # ì²¨ë¶€íŒŒì¼ ê´€ë¦¬
```

### 7.2 Repository Interfaces
```
domain/repository/
â”œâ”€â”€ document_template_repo.py
â”œâ”€â”€ approval_request_repo.py
â”œâ”€â”€ approval_line_repo.py
â”œâ”€â”€ approval_history_repo.py
â””â”€â”€ attached_file_repo.py
```

### 7.3 Repository Implementations
```
infra/repository/
â”œâ”€â”€ document_template_repo.py
â”œâ”€â”€ approval_request_repo.py
â”œâ”€â”€ approval_line_repo.py
â”œâ”€â”€ approval_history_repo.py
â””â”€â”€ attached_file_repo.py
```

## 8. Controller ì„¤ê³„

### 8.1 API Controllers
```
interface/controller/
â”œâ”€â”€ document_template_controller.py # ì–‘ì‹ ê´€ë¦¬ API
â”œâ”€â”€ approval_controller.py          # ê²°ì¬ ìš”ì²­/ì²˜ë¦¬ API
â”œâ”€â”€ approval_line_controller.py     # ê²°ì¬ì„  ê´€ë¦¬ API
â””â”€â”€ file_attachment_controller.py   # ì²¨ë¶€íŒŒì¼ API
```

## 9. êµ¬í˜„ ìˆœì„œ

### Phase 1: ê¸°ë³¸ êµ¬ì¡° (1-2ì¼)
1. âœ… common/auth.pyì— Enum ì¶”ê°€
2. ë„ë©”ì¸ ëª¨ë¸ ìƒì„± (5ê°œ ëª¨ë¸)
3. DB ëª¨ë¸ ìƒì„± (5ê°œ ëª¨ë¸)
4. ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì •ì˜

### Phase 2: í•µì‹¬ ê¸°ëŠ¥ (2-3ì¼)
1. ë¦¬í¬ì§€í† ë¦¬ êµ¬í˜„ì²´ ì‘ì„±
2. ê¸°ë³¸ ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬í˜„
3. ì–‘ì‹ ê´€ë¦¬ API êµ¬í˜„
4. ê²°ì¬ ìš”ì²­ ìƒì„±/ìˆ˜ì • API

### Phase 3: ê²°ì¬ ì²˜ë¦¬ (2-3ì¼)
1. ê²°ì¬ì„  ì„¤ì • ê¸°ëŠ¥
2. ê²°ì¬ ìŠ¹ì¸/ë°˜ë ¤ ì²˜ë¦¬
3. ê²°ì¬ ì´ë ¥ ê´€ë¦¬
4. ìƒíƒœ ë³€ê²½ ë¡œì§

### Phase 4: íŒŒì¼ & ê³ ê¸‰ ê¸°ëŠ¥ (2-3ì¼)
1. íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ
2. ë¬¸ì„œë²ˆí˜¸ ìë™ ìƒì„±
3. ì‹¤ì‹œê°„ ì•Œë¦¼ (WebSocket í™•ì¥)
4. ê¶Œí•œ ê²€ì¦ ê°•í™”

### Phase 5: í†µí•© & í…ŒìŠ¤íŠ¸ (1-2ì¼)
1. ë©”ì¸ ì•±ì— ë¼ìš°í„° ë“±ë¡
2. DI ì»¨í…Œì´ë„ˆ ì„¤ì •
3. API í…ŒìŠ¤íŠ¸
4. ë²„ê·¸ ìˆ˜ì •

## 10. ê¸°ìˆ  ìŠ¤íƒ

### 10.1 ë°±ì—”ë“œ
- FastAPI: REST API
- MongoDB: ë¬¸ì„œ ë°ì´í„°ë² ì´ìŠ¤
- Beanie: ODM
- WebSocket: ì‹¤ì‹œê°„ ì•Œë¦¼

### 10.2 íŒŒì¼ ì €ì¥
- ë¡œì»¬ íŒŒì¼ì‹œìŠ¤í…œ ë˜ëŠ” í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€
- 20MB ìš©ëŸ‰ ì œí•œ
- ë‹¤ì–‘í•œ íŒŒì¼ í˜•ì‹ ì§€ì›

### 10.3 ë³´ì•ˆ
- JWT ì¸ì¦ ìœ ì§€
- íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ ê²€ì¦
- XSS ë°©ì§€ (HTML ì½˜í…ì¸  ê²€ì¦)

## 11. ì´ˆê¸° ì–‘ì‹ í…œí”Œë¦¿ ë°ì´í„°

### 11.1 ê¸°ë³¸ ì–‘ì‹ ëª©ë¡
1. **ì—…ë¬´ê¸°ì•ˆ**
   - ê¸°ì•ˆì œëª©, ê¸°ì•ˆë‚´ìš©, ì²¨ë¶€íŒŒì¼
   - í”„ë¦¬í”½ìŠ¤: "ì—…ë¬´ê¸°ì•ˆ"

2. **ì§€ì¶œê²°ì˜ì„œ(ê¸°ê°„ë³„)**
   - ì§€ì¶œí•­ëª©, ê¸ˆì•¡, ê¸°ê°„, ì‚¬ìœ 
   - í”„ë¦¬í”½ìŠ¤: "ì§€ì¶œê²°ì˜"

3. **ì§€ì¶œê²°ì˜ì„œ(ì˜ˆì‚°ì§‘í–‰)**
   - ì˜ˆì‚°í•­ëª©, ì§‘í–‰ê¸ˆì•¡, ì§‘í–‰ì‚¬ìœ 
   - í”„ë¦¬í”½ìŠ¤: "ì˜ˆì‚°ì§‘í–‰"

4. **ì¶œì¥ì‹ ì²­ì„œ**
   - ì¶œì¥ì§€, ì¶œì¥ê¸°ê°„, ì¶œì¥ëª©ì , ì˜ˆìƒë¹„ìš©
   - í”„ë¦¬í”½ìŠ¤: "ì¶œì¥ì‹ ì²­"

5. **ì´ë¬´ì œì˜ì„œ**
   - ì œì˜ë‚´ìš©, ì œì˜ì‚¬ìœ , ì˜ˆìƒíš¨ê³¼
   - í”„ë¦¬í”½ìŠ¤: "ì´ë¬´ì œì˜"

## 12. í…ŒìŠ¤íŠ¸ ê³„íš

### 12.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- ë„ë©”ì¸ ë¡œì§ í…ŒìŠ¤íŠ¸
- ì„œë¹„ìŠ¤ ë ˆì´ì–´ í…ŒìŠ¤íŠ¸
- ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸

### 12.2 í†µí•© í…ŒìŠ¤íŠ¸
- API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- ê²°ì¬ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ í…ŒìŠ¤íŠ¸

### 12.3 E2E í…ŒìŠ¤íŠ¸
- ì „ì²´ ê²°ì¬ í”„ë¡œì„¸ìŠ¤ í…ŒìŠ¤íŠ¸
- ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

## 13. êµ¬í˜„ ìƒí™© (Implementation Status)

### âœ… Phase 1: ê¸°ë³¸ êµ¬ì¡° (ì™„ë£Œ)
- [x] 1. common/auth.pyì— ì „ìê²°ì¬ìš© Enum ì¶”ê°€ (DocumentStatus, ApprovalAction, DocumentVisibility)
- [x] 2. Pydantic BaseModelë¡œ ë„ë©”ì¸ ëª¨ë¸ ìƒì„± (5ê°œ íŒŒì¼)
- [x] 3. Beanie Documentë¡œ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ êµ¬í˜„ (5ê°œ íŒŒì¼)
- [x] 4. ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (5ê°œ íŒŒì¼)

### âœ… Phase 2: í•µì‹¬ ê¸°ëŠ¥ (ì™„ë£Œ)
- [x] 5. ë¦¬í¬ì§€í† ë¦¬ êµ¬í˜„ì²´ ì‘ì„± (5ê°œ íŒŒì¼)
- [x] 6. ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤ êµ¬í˜„ (5ê°œ íŒŒì¼)
- [x] 7. API ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„ (4ê°œ íŒŒì¼)
- [x] 8. ë©”ì¸ ì•±ì— ë¼ìš°í„° ë“±ë¡ ë° DB ëª¨ë¸ ì¶”ê°€
- [x] 9. ì»¨í…Œì´ë„ˆ DI ì„¤ì • ì—…ë°ì´íŠ¸
- [x] 10. íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ êµ¬í˜„

### ğŸ”² Phase 3: ì™„ì„±ë„ ë†’ì´ê¸° (ì„ íƒì‚¬í•­)
- [ ] 11. ì´ˆê¸° ì–‘ì‹ í…œí”Œë¦¿ ë°ì´í„° ì„¤ì •
- [ ] 12. Response ëª¨ë¸ ì¶”ê°€ (API ì‘ë‹µ ìµœì í™”)
- [ ] 13. íŒŒì¼ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìë™ ìƒì„±
- [ ] 14. ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±

## 14. í˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ëŠ¥

### âœ… êµ¬í˜„ ì™„ë£Œëœ API
**ì–‘ì‹ ê´€ë¦¬**:
- `POST /api/templates` - ì–‘ì‹ ìƒì„± (ê´€ë¦¬ì)
- `GET /api/templates` - ì–‘ì‹ ëª©ë¡ ì¡°íšŒ
- `GET /api/templates/{id}` - ì–‘ì‹ ìƒì„¸ ì¡°íšŒ
- `PUT /api/templates/{id}` - ì–‘ì‹ ìˆ˜ì • (ê´€ë¦¬ì)
- `DELETE /api/templates/{id}` - ì–‘ì‹ ì‚­ì œ (ê´€ë¦¬ì)

**ê²°ì¬ ìš”ì²­**:
- `POST /api/approvals` - ê²°ì¬ ìš”ì²­ ìƒì„± (í…œí”Œë¦¿ ì‚¬ìš© or ììœ  ì‘ì„±)
- `GET /api/approvals` - ë‚´ê°€ ê¸°ì•ˆí•œ ê²°ì¬ ëª©ë¡
- `GET /api/approvals/pending` - ë‚´ê°€ ê²°ì¬í•  ìš”ì²­ ëª©ë¡
- `GET /api/approvals/{id}` - ê²°ì¬ ìƒì„¸ ì¡°íšŒ
- `POST /api/approvals/{id}/submit` - ê²°ì¬ ìš”ì²­ ìƒì‹ 
- `POST /api/approvals/{id}/approve` - ê²°ì¬ ìŠ¹ì¸
- `POST /api/approvals/{id}/reject` - ê²°ì¬ ë°˜ë ¤
- `POST /api/approvals/{id}/cancel` - ê²°ì¬ ìš”ì²­ ì·¨ì†Œ

**ê²°ì¬ì„  ê´€ë¦¬**:
- `GET /api/approvals/{id}/lines` - ê²°ì¬ì„  ì¡°íšŒ
- `PUT /api/approvals/{id}/lines` - ê²°ì¬ì„  ì„¤ì •
- `GET /api/approval-lines/my-pending` - ë‚´ ëŒ€ê¸° ê²°ì¬ ëª©ë¡
- `GET /api/approval-lines/my-history` - ë‚´ ê²°ì¬ ì´ë ¥

**íŒŒì¼ ê´€ë¦¬**:
- `POST /api/files/approvals/{id}` - ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ
- `GET /api/files/approvals/{id}` - ì²¨ë¶€íŒŒì¼ ëª©ë¡
- `GET /api/files/{id}/download` - íŒŒì¼ ë‹¤ìš´ë¡œë“œ
- `DELETE /api/files/{id}` - ì²¨ë¶€íŒŒì¼ ì‚­ì œ

### ğŸ¯ í•µì‹¬ íŠ¹ì§•
- **í…œí”Œë¦¿ ê¸°ë°˜ + ììœ  ì‘ì„±**: í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ììœ ë¡­ê²Œ ê²°ì¬ ìš”ì²­ ìƒì„±
- **ìœ ì—°í•œ ê²°ì¬ì„ **: ìˆœì°¨/ë³‘ë ¬ ê²°ì¬, í•„ìˆ˜/ì„ íƒ ê²°ì¬ì ì„¤ì •
- **ì™„ì „í•œ ì›Œí¬í”Œë¡œìš°**: ì„ì‹œì €ì¥ â†’ ìƒì‹  â†’ ê²°ì¬ â†’ ì™„ë£Œ/ë°˜ë ¤
- **íŒŒì¼ ì²¨ë¶€**: 20MB ì´í•˜ ë‹¤ì–‘í•œ í˜•ì‹ì˜ íŒŒì¼ ì²¨ë¶€ ê°€ëŠ¥
- **ê¶Œí•œ ê´€ë¦¬**: JWT ê¸°ë°˜ ì¸ì¦, ì—­í• ë³„ ì ‘ê·¼ ì œì–´

## 14. ì£¼ì˜ì‚¬í•­

### 14.1 ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ì˜ í˜¸í™˜ì„±
- ê¸°ì¡´ User, Group ëª¨ë¸ê³¼ ì—°ë™
- ê¸°ì¡´ ì¸ì¦/ê¶Œí•œ ì‹œìŠ¤í…œ ìœ ì§€
- ê¸°ì¡´ API ì—”ë“œí¬ì¸íŠ¸ì™€ ì¶©ëŒ ë°©ì§€

### 14.2 ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
- ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
- ë§ì€ ê²°ì¬ ìš”ì²­ ì‹œ ì„±ëŠ¥ ìµœì í™”
- ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”

### 14.3 ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ ê²€ì¦
- ê²°ì¬ ê¶Œí•œ ê²€ì¦
- XSS/CSRF ë°©ì§€

## 15. í™•ì¥ ê°€ëŠ¥ì„±

### 15.1 í–¥í›„ ì¶”ê°€ ê¸°ëŠ¥
- ê²°ì¬ í…œí”Œë¦¿ ë³µì‚¬ ê¸°ëŠ¥
- ê²°ì¬ì„  ì¦ê²¨ì°¾ê¸°
- ëª¨ë°”ì¼ ì•± ì§€ì›
- ê²°ì¬ í†µê³„/ë¦¬í¬íŠ¸

### 15.2 ì‹œìŠ¤í…œ í™•ì¥
- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬ ê°€ëŠ¥ì„±
- í´ë¼ìš°ë“œ ë°°í¬ ê³ ë ¤
- API ë²„ì „ ê´€ë¦¬